(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),o=a.n(r),i=a(71),c=a(6),s=a(7),u=a(9),m=a(8),d=a(10),p=a(170),h=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand-lg"},l.a.createElement("table",{className:"navtable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(p.a,{className:"navtablenavlink",to:"/maindata"},"RENTALS")),l.a.createElement("td",null,l.a.createElement(p.a,{className:"navtablenavlink",to:"/register"},"REGISTER")),l.a.createElement("td",null,l.a.createElement(p.a,{className:"navtablenavlink",to:"/login"},"LOGIN")))))))}}]),t}(n.Component),g=a(73),E=(a(96),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(g.SideNav,null,l.a.createElement("div",{className:"sidebar-nav"},l.a.createElement("nav",null,l.a.createElement("br",null),l.a.createElement("ul",{className:"list-unstyled"},l.a.createElement("li",null,l.a.createElement("a",{className:"allrentals",href:"#",onClick:function(){return e.props.getAllRental()}},"All Rentals")),l.a.createElement("br",null),l.a.createElement("li",null,l.a.createElement("a",{"data-toggle":"collapse","aria-expanded":"false",className:"dropdown-toggle"},"By location"),l.a.createElement("ul",null,this.props.distinctCities.map(function(t){return l.a.createElement("li",null,l.a.createElement("a",{className:"locations",href:"#",onClick:function(){return e.props.getRentalsByCity(t)}},t))})))))))}}]),t}(n.Component)),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"searchlabel"},"Search : "),l.a.createElement("br",null),l.a.createElement("span",{className:"searchlabel"},"Minimum price: "),l.a.createElement("input",{type:"text",name:"minprice",value:this.props.minprice,onChange:function(t){return e.props.onChildDataEntry(t)}}),"  ",l.a.createElement("span",{className:"searchlabel"}," Maximum price: ")," ",l.a.createElement("input",{type:"text",name:"maxprice",value:this.props.maxprice,onChange:function(t){return e.props.onChildDataEntry(t)}}),"  ","  ","  ",l.a.createElement("button",{className:"searchbutton",onClick:this.props.handleSearchByPrice},"Search"))}}]),t}(n.Component),b=a(13),C=a(2),y=(a(33),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e={page:1,sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"All",value:this.props.rentalData.length}],sizePerPage:5,pageStartIndex:1,paginationSize:3,prePage:"Prev",nextPage:"Next",firstPage:"First",lastPage:"Last",paginationShowsTotal:this.renderShowsTotal,paginationPosition:"bottom"};return l.a.createElement("div",null,l.a.createElement(E,{distinctCities:this.props.distinctCities,getRentalsByCity:this.props.getRentalsByCity,getAllRental:this.props.getAllRental}),l.a.createElement("div",{className:"rentalSection"},l.a.createElement(f,{onChildDataEntry:this.props.onChildDataEntry,handleSearchByPrice:this.props.handleSearchByPrice}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(b.BootstrapTable,{data:this.props.rentalData,striped:!0,hover:!0,pagination:!0,options:e},l.a.createElement(b.TableHeaderColumn,{dataField:"room_id",isKey:!0,dataSort:!0},"Room_id"),l.a.createElement(b.TableHeaderColumn,{dataField:"neighborhood",dataSort:!0},"Neighborhood"),l.a.createElement(b.TableHeaderColumn,{dataField:"room_type",dataSort:!0},"Room_Type"),l.a.createElement(b.TableHeaderColumn,{dataField:"country",dataSort:!0},"Country"),l.a.createElement(b.TableHeaderColumn,{dataField:"city",dataSort:!0},"City"),l.a.createElement(b.TableHeaderColumn,{dataField:"reviews",dataSort:!0},"Reviews"),l.a.createElement(b.TableHeaderColumn,{dataField:"overall_satisfaction",dataSort:!0},"Satisfaction"),l.a.createElement(b.TableHeaderColumn,{dataField:"accommodates",dataSort:!0},"Accommodates"),l.a.createElement(b.TableHeaderColumn,{dataField:"bedrooms",dataSort:!0},"Bedrooms"),l.a.createElement(b.TableHeaderColumn,{dataField:"bathrooms",dataSort:!0},"Bathrooms"),l.a.createElement(b.TableHeaderColumn,{dataField:"price",dataSort:!0},"Price"))),l.a.createElement(C.ToastContainer,{autoClose:!1}))}}]),t}(n.Component)),v=(a(146),a(37)),T=a.n(v),O=a(171),I=a(78),S=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).isLocalTokenValid=function(){var e=localStorage.getItem("reactCloudAppJwt");return null!==e&&"undefined"!==e},a.logoutFn=function(){var e=localStorage.getItem("reactCloudAppJwt");null!==e&&"undefined"!==e&&(localStorage.removeItem("reactCloudAppJwt"),console.log("token removed"))},a.clearInputData=function(){a.props.clearInputData()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this;return e=this.isLocalTokenValid()?l.a.createElement("div",null,"User is logged in. Click here to"," ",l.a.createElement("a",{href:"#",onClick:this.logoutFn},"logout")):l.a.createElement("div",null,l.a.createElement("table",{className:"regtable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"First Name: "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"firstname",onChange:function(e){return t.props.onChildDataEntry(e)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Last Name: "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"lastname",onChange:function(e){return t.props.onChildDataEntry(e)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Email: "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"email",onChange:function(e){return t.props.onChildDataEntry(e)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Password: "),l.a.createElement("td",null,l.a.createElement("input",{type:"password",name:"password",onChange:function(e){return t.props.onChildDataEntry(e)}}))),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.props.register},"Register"))))),l.a.createElement(C.ToastContainer,{autoClose:!1})),l.a.createElement("div",{className:"registerform"},e)}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).isLocalTokenValid=function(){var e=localStorage.getItem("reactCloudAppJwt");return null!==e&&"undefined"!==e},a.logoutFn=function(){var e=localStorage.getItem("reactCloudAppJwt");null!==e&&"undefined"!==e&&(localStorage.removeItem("reactCloudAppJwt"),console.log("token removed"))},a.clearInputData=function(){a.props.clearInputData()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this;return e=this.isLocalTokenValid()?l.a.createElement("div",null,"User is logged in. Click here to"," ",l.a.createElement("a",{href:"#",onClick:this.logoutFn},"logout")):l.a.createElement("div",null," ",l.a.createElement("table",{className:"logintable"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Email: "),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"email",onChange:function(e){return t.props.onChildDataEntry(e)}}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Password: "),l.a.createElement("td",null,l.a.createElement("input",{type:"password",name:"password",onChange:function(e){return t.props.onChildDataEntry(e)}}))),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:this.props.login},"Login"))))),l.a.createElement(C.ToastContainer,{autoClose:!1})),l.a.createElement("div",{className:"loginform"},e)}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).authToastId=null,a.noLoginToastId=null,a.isLocalTokenValid=function(){C.toast.dismiss(a.noLoginToastId);var e=localStorage.getItem("reactCloudAppJwt");return!(null===e||!e||"undefined"===e)||(console.log("token is empty"),a.noLoginToastId=C.toast.warning("You should be logged in to use these features",{position:C.toast.POSITION.TOP_RIGHT}),!1)},a.getAllRental=function(){a.setState({minprice:"",maxprice:""}),a.isLocalTokenValid()?fetch("/api/getAllRental",{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("reactCloudAppJwt")}}).then(function(e){return e.json()}).catch(function(e){return console.log("entered catch block of getAllRental"),a.setState({rentalData:[]}),Promise.reject()}).then(function(e){return a.setState({rentalData:e.data})}):a.setState({rentalData:[]})},a.getDistinctCities=function(){fetch("/api/getDistinctCities").then(function(e){return e.json()}).then(function(e){return a.setState({distinctCities:e.data})})},a.getRentalsByCity=function(e){a.setState({minprice:"",maxprice:""}),a.isLocalTokenValid()?fetch("/api/getRentalBy?city="+e,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("reactCloudAppJwt")}}).then(function(e){return e.json()}).then(function(e){return a.setState({rentalData:e.data})}):a.setState({rentalData:[]})},a.onChildDataEntry=function(e){a.setState(Object(i.a)({},e.target.name,e.target.value))},a.handleSearchByPrice=function(){a.isLocalTokenValid()&&fetch("/api/getRentalByPriceRange?minprice="+a.state.minprice+"&maxprice="+a.state.maxprice,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("reactCloudAppJwt")}}).then(function(e){return e.json()}).then(function(e){return a.setState({rentalData:e.data})})},a.clearInputData=function(){a.setState({firstname:"",lastname:"",email:"",password:""}),console.log("<after clearing> email: "+a.state.email)},a.register=function(){C.toast.dismiss(a.authToastId);var e={firstname:a.state.firstname,lastname:a.state.lastname,email:a.state.email,password:a.state.password};console.log("before sending reg request: "+e.email),T.a.post("/api/register",e).then(function(e){a.setState({message:e.data.message}),C.toast.isActive(a.authToastId)||(e.data.success?(localStorage.setItem("reactCloudAppJwt",e.data.token),a.authToastId=C.toast.success(""+e.data.message,{position:C.toast.POSITION.TOP_RIGHT}),a.clearInputData()):a.authToastId=C.toast.info(""+e.data.message,{position:C.toast.POSITION.TOP_RIGHT}))}).catch(function(e){C.toast.warning(a.state.message,{position:C.toast.POSITION.TOP_RIGHT})})},a.login=function(){C.toast.dismiss(a.authToastId);var e={email:a.state.email,password:a.state.password};T.a.post("/api/login",e).then(function(e){a.setState({message:e.data.message}),C.toast.isActive(a.authToastId)||(e.data.success?(localStorage.setItem("reactCloudAppJwt",e.data.token),a.authToastId=C.toast.success(""+e.data.message,{position:C.toast.POSITION.TOP_RIGHT}),a.clearInputData()):a.authToastId=C.toast.info(""+e.data.message,{position:C.toast.POSITION.TOP_RIGHT}))}).catch(function(e){C.toast.warning(a.state.message,{position:C.toast.POSITION.TOP_RIGHT})})},a.state={rentalData:[],distinctCities:[],minprice:0,maxprice:0,firstname:"",lastname:"",email:"",password:"",message:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getAllRental(),this.getDistinctCities()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(h,null),l.a.createElement("br",null),l.a.createElement(O.a,null,l.a.createElement(I.a,{exact:!0,path:"/maindata",render:function(t){return l.a.createElement(y,Object.assign({rentalData:e.state.rentalData,onChildDataEntry:e.onChildDataEntry,handleSearchByPrice:e.handleSearchByPrice,distinctCities:e.state.distinctCities,getRentalsByCity:e.getRentalsByCity,getAllRental:e.getAllRental,minprice:e.state.minprice,maxprice:e.state.price,message:e.state.message},t))}}),l.a.createElement(I.a,{exact:!0,path:"/register",render:function(t){return l.a.createElement(S,Object.assign({onChildDataEntry:e.onChildDataEntry,register:e.register,clearInputData:e.clearInputData},t))}}),l.a.createElement(I.a,{exact:!0,path:"/login",render:function(t){return l.a.createElement(j,Object.assign({onChildDataEntry:e.onChildDataEntry,login:e.login,clearInputData:e.clearInputData},t))}})))}}]),t}(n.Component),D=(a(166),a(169));o.a.render(l.a.createElement(D.a,null,l.a.createElement(w,null)),document.getElementById("root"))},80:function(e,t,a){e.exports=a(168)}},[[80,2,1]]]);
//# sourceMappingURL=main.4558d303.chunk.js.map